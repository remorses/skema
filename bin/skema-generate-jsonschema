#!/usr/bin/env python
import sys
import json
from skema.generate import get_result_file
import skema


if len(sys.argv) != 2:
    print('needs exactly 1 argument, path')

result_path = get_result_file(sys.argv[-1], '.json')
with open(sys.argv[-1]) as f:
    data = f.read()
    schema = skema.to_jsonschema(data, ref=None, resolve=True)
    with open(result_path, 'w') as f:
        f.write(json.dumps(schema, indent=4))


